var isChrome=!!navigator.webkitGetUserMedia,DetectRTC={};!function(){var e;DetectRTC.screen={chromeMediaSource:"screen",getSourceId:function(t){if(!t)throw'"callback" parameter is mandatory.';e=t,window.postMessage("get-sourceId","*")},isChromeExtensionAvailable:function(e){if(e){if("desktop"==DetectRTC.screen.chromeMediaSource)return e(!0);window.postMessage("are-you-there","*"),setTimeout(function(){e("screen"==DetectRTC.screen.chromeMediaSource?!1:!0)},2e3)}},onMessageCallback:function(t){if("string"==typeof t||t.sourceId){if(console.log("chrome message",t),"PermissionDeniedError"==t){if(DetectRTC.screen.chromeMediaSource="PermissionDeniedError",e)return e("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==t&&(document.getElementById("install-button")&&(document.getElementById("install-button").parentNode.innerHTML='<strong>Great!</strong> <a href="https://chrome.google.com/webstore/detail/screen-capturing/ajhifddimkapgcifgcodmmfdlknahffk" target="_blank">Google chrome extension</a> is installed.'),DetectRTC.screen.chromeMediaSource="desktop"),t.sourceId&&(DetectRTC.screen.sourceId=t.sourceId,e&&e(DetectRTC.screen.sourceId))}},getChromeExtensionStatus:function(e){if(navigator.mozGetUserMedia)return e("not-chrome");var t="ajhifddimkapgcifgcodmmfdlknahffk",n=document.createElement("img");n.src="chrome-extension://"+t+"/icon.png",n.onload=function(){DetectRTC.screen.chromeMediaSource="screen",window.postMessage("are-you-there","*"),setTimeout(function(){DetectRTC.screen.notInstalled||e("installed-enabled")},2e3)},n.onerror=function(){DetectRTC.screen.notInstalled=!0,e("not-installed")}}},window.postMessage&&isChrome&&DetectRTC.screen.isChromeExtensionAvailable()}(),DetectRTC.screen.getChromeExtensionStatus(function(e){"installed-enabled"==e&&(document.getElementById("install-button")&&(document.getElementById("install-button").parentNode.innerHTML='<strong>Great!</strong> <a href="https://chrome.google.com/webstore/detail/screen-capturing/ajhifddimkapgcifgcodmmfdlknahffk" target="_blank">Google chrome extension</a> is installed.'),DetectRTC.screen.chromeMediaSource="desktop")}),window.addEventListener("message",function(e){e.origin==window.location.origin&&DetectRTC.screen.onMessageCallback(e.data)}),console.log("current chromeMediaSource",DetectRTC.screen.chromeMediaSource);